# WSL Development Environment .zshrc
# Managed by Ansible - Do not edit manually

# Path configuration
export PATH=$HOME/bin:$HOME/.local/bin:/usr/local/bin:$PATH

# Oh My Zsh installation
export ZSH="$HOME/.oh-my-zsh"

# Theme
ZSH_THEME="agnoster"

# Plugins
plugins=(git zsh-autosuggestions zsh-syntax-highlighting docker)

# Load Oh My Zsh
source $ZSH/oh-my-zsh.sh

# ===== Language Environment =====
export LANG=en_US.UTF-8

# Preferred editor
export EDITOR='nvim'
export VISUAL='nvim'

# ===== Homebrew =====
{% if enable_brew | default(true) %}
eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
{% endif %}

# ===== Python (uv) =====
{% if enable_python | default(true) %}
export PATH="$HOME/.cargo/bin:$PATH"
{% endif %}

# ===== Node.js (nvm) =====
{% if enable_node | default(true) %}
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"
{% endif %}

# ===== Go (goenv) =====
{% if enable_go | default(true) %}
export GOENV_ROOT="$HOME/.goenv"
export PATH="$GOENV_ROOT/bin:$PATH"
eval "$(goenv init -)"
export PATH="$GOROOT/bin:$PATH"
export PATH="$PATH:$GOPATH/bin"
{% endif %}

# ===== Modern CLI Tools =====
{% if enable_brew | default(true) %}
# Use bat instead of cat
command -v bat >/dev/null 2>&1 && alias cat='bat'

# Use eza instead of ls
if command -v eza >/dev/null 2>&1; then
  alias ls='eza --icons'
  alias ll='eza -lh --icons --git'
  alias la='eza -lah --icons --git'
  alias lt='eza --tree --level=2 --icons'
fi

# zoxide (smart cd)
command -v zoxide >/dev/null 2>&1 && eval "$(zoxide init zsh)"

# fzf (fuzzy finder)
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
{% endif %}

# ===== Docker Aliases =====
{% if enable_docker | default(true) %}
alias dps='docker ps'
alias dpsa='docker ps -a'
alias di='docker images'
alias dlog='docker logs'
alias dlogf='docker logs -f'
alias dexec='docker exec -it'
alias dstop='docker stop $(docker ps -q)'
alias drm='docker rm $(docker ps -aq)'
alias drmi='docker rmi $(docker images -q)'
alias dprune='docker system prune -af'

# Docker Compose
alias dc='docker compose'
alias dcup='docker compose up -d'
alias dcdown='docker compose down'
alias dclog='docker compose logs -f'
alias dcps='docker compose ps'
alias dcrestart='docker compose restart'
alias dcbuild='docker compose build'
{% endif %}

# ===== Windows Integration =====
{% if enable_windows_integration | default(true) %}
# Get Windows username
export WINUSER=$(cmd.exe /c "echo %USERNAME%" 2>/dev/null | tr -d '\r' 2>/dev/null || echo "")
export WINHOME="/mnt/c/Users/$WINUSER"

# Windows shortcuts
alias cdwin='cd $WINHOME'
alias cddownloads='cd $WINHOME/Downloads'
alias cddesktop='cd $WINHOME/Desktop'
alias cddocuments='cd $WINHOME/Documents'

# Open Windows Explorer
alias explorer='explorer.exe .'

# VS Code
alias code='code'
{% endif %}

# ===== Git Aliases =====
alias gs='git status'
alias ga='git add'
alias gc='git commit'
alias gp='git push'
alias gl='git pull'
alias gd='git diff'
alias gco='git checkout'
alias gb='git branch'
alias glog='git log --oneline --graph --decorate'

# ===== Utility Aliases =====
alias zshconfig="$EDITOR ~/.zshrc"
alias reload='source ~/.zshrc'
alias c='clear'
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'

# ===== Custom Functions =====

# Create directory and cd into it
mkcd() {
  mkdir -p "$1" && cd "$1"
}

# Extract various archive formats
extract() {
  if [ -f $1 ]; then
    case $1 in
      *.tar.bz2)   tar xjf $1     ;;
      *.tar.gz)    tar xzf $1     ;;
      *.bz2)       bunzip2 $1     ;;
      *.rar)       unrar e $1     ;;
      *.gz)        gunzip $1      ;;
      *.tar)       tar xf $1      ;;
      *.tbz2)      tar xjf $1     ;;
      *.tgz)       tar xzf $1     ;;
      *.zip)       unzip $1       ;;
      *.Z)         uncompress $1  ;;
      *.7z)        7z x $1        ;;
      *)           echo "'$1' cannot be extracted via extract()" ;;
    esac
  else
    echo "'$1' is not a valid file"
  fi
}

# ===== User Custom Configurations =====
# Add your custom configurations below this line
