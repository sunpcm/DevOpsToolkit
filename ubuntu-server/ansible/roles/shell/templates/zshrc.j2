# Ubuntu Server .zshrc
# Managed by Ansible

# Path configuration
export PATH=$HOME/bin:$HOME/.local/bin:/usr/local/bin:$PATH

# Oh My Zsh installation
export ZSH="$HOME/.oh-my-zsh"

# Theme
ZSH_THEME="{{ zsh_theme }}"

# Plugins
plugins=({{ zsh_plugins | join(' ') }})

# Load Oh My Zsh
source $ZSH/oh-my-zsh.sh

# ===== Language Environment =====
export LANG=en_US.UTF-8

# Preferred editor
export EDITOR='vim'
export VISUAL='vim'

# ===== Homebrew =====
{% if install_brew %}
if [ -x /home/linuxbrew/.linuxbrew/bin/brew ]; then
  eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
fi
{% endif %}

# ===== Docker Aliases =====
{% if install_docker %}
alias dps='docker ps'
alias dpsa='docker ps -a'
alias di='docker images'
alias dlog='docker logs'
alias dlogf='docker logs -f'
alias dexec='docker exec -it'
alias dstop='docker stop $(docker ps -q)'
alias drm='docker rm $(docker ps -aq)'
alias drmi='docker rmi $(docker images -q)'
alias dprune='docker system prune -af'

# Docker Compose
alias dc='docker compose'
alias dcup='docker compose up -d'
alias dcdown='docker compose down'
alias dclog='docker compose logs -f'
alias dcps='docker compose ps'
alias dcrestart='docker compose restart'
alias dcbuild='docker compose build'
{% endif %}

# ===== Git Aliases =====
alias gs='git status'
alias ga='git add'
alias gc='git commit'
alias gp='git push'
alias gl='git pull'
alias gd='git diff'
alias gco='git checkout'
alias gb='git branch'
alias glog='git log --oneline --graph --decorate'

# ===== System Aliases =====
alias ll='ls -lah'
alias la='ls -A'
alias l='ls -CF'
alias zshconfig="$EDITOR ~/.zshrc"
alias reload='source ~/.zshrc'
alias c='clear'
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'

# System monitoring
alias ports='netstat -tulanp'
alias meminfo='free -h'
alias diskinfo='df -h'

# ===== Custom Functions =====

# Create directory and cd into it
mkcd() {
  mkdir -p "$1" && cd "$1"
}

# Extract various archive formats
extract() {
  if [ -f $1 ]; then
    case $1 in
      *.tar.bz2)   tar xjf $1     ;;
      *.tar.gz)    tar xzf $1     ;;
      *.bz2)       bunzip2 $1     ;;
      *.rar)       unrar e $1     ;;
      *.gz)        gunzip $1      ;;
      *.tar)       tar xf $1      ;;
      *.tbz2)      tar xjf $1     ;;
      *.tgz)       tar xzf $1     ;;
      *.zip)       unzip $1       ;;
      *.Z)         uncompress $1  ;;
      *.7z)        7z x $1        ;;
      *)           echo "'$1' cannot be extracted via extract()" ;;
    esac
  else
    echo "'$1' is not a valid file"
  fi
}

# Find process by name
findproc() {
  ps aux | grep -v grep | grep -i -e VSZ -e $1
}

# ===== User Custom Configurations =====
# Add your custom configurations below this line
