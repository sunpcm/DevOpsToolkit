---
# ===== User Management =====
create_user: true
username: "niu"                    # 创建的普通用户名
user_password: ""                     # 留空使用密钥认证，或设置密码（需要加密）
user_shell: "/bin/zsh"               # 用户默认 shell
enable_passwordless_sudo: true       # 免密 sudo

# ===== SSH Security =====
enable_ssh_security: true
ssh_port: 22                         # SSH 端口（修改后需要在防火墙放行）
disable_root_login: true             # 禁用 root 登录
disable_password_auth: true          # 禁用密码认证（只允许密钥）
ssh_authorized_keys: ["ssh-rsa AAA"] # SSH 公钥列表

# ===== Firewall =====
enable_firewall: true
ufw_default_incoming: deny           # 默认拒绝入站
ufw_default_outgoing: allow          # 默认允许出站
allowed_ports:
  - { port: "{{ ssh_port }}", proto: "tcp", comment: "SSH" }
  - { port: "80", proto: "tcp", comment: "HTTP" }
  - { port: "443", proto: "tcp", comment: "HTTPS" }
  - { port: "3000", proto: "tcp", comment: "Dev Port 3000" }
  - { port: "5173", proto: "tcp", comment: "Vite Dev Server" }
  - { port: "8000", proto: "tcp", comment: "Dev Port 8000" }
  - { port: "8080", proto: "tcp", comment: "Dev Port 8080" }

# ===== Base Packages =====
install_base_packages: true
base_packages:
  - curl
  - wget
  - git
  - vim
  - htop
  - net-tools
  - build-essential
  - software-properties-common
  - apt-transport-https
  - ca-certificates
  - gnupg
  - lsb-release

# ===== Docker =====
install_docker: true
docker_users:
  - "{{ username }}"                 # 添加用户到 docker 组

# ===== Nginx =====
install_nginx: true

# ===== Homebrew =====
install_brew: true

# ===== Shell (Zsh + Oh My Zsh) =====
install_zsh: true
install_ohmyzsh: true
zsh_theme: "agnoster"
zsh_plugins:
  - git
  - zsh-autosuggestions
  - zsh-syntax-highlighting
  - docker

# ===== Fonts =====
install_fonts: true
fonts_to_install:
  - fonts-powerline
  - fonts-firacode
